{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ederivc\\\\Documents\\\\PuppyVeterinarySystem\\\\frontend\\\\src\\\\pages\\\\CartPage\\\\CartPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { IMG_URL } from \"../../api/api\";\nimport useAuth from \"../../auth/useAuth\";\nimport { CartContext } from \"../../layouts/Layout\";\nimport { Alert } from \"react-bootstrap\";\nimport styles from \"./CartPage.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CartPage = () => {\n  _s();\n\n  var _user$first_name, _user$last_name, _user$phone, _user$email;\n\n  const {\n    cart,\n    setCart,\n    addedProduct,\n    setAddedProduct,\n    cartTotal,\n    cartRef,\n    setCartTotal // needsChange,\n    // setNeedsChange,\n    // checker,\n\n  } = useContext(CartContext);\n  const {\n    user\n  } = useAuth();\n  const [hasLoaded, setHasLoaded] = useState(false);\n  const [userForm, setUserForm] = useState({\n    nombre: (_user$first_name = user === null || user === void 0 ? void 0 : user.first_name) !== null && _user$first_name !== void 0 ? _user$first_name : \"\",\n    apellido: (_user$last_name = user === null || user === void 0 ? void 0 : user.last_name) !== null && _user$last_name !== void 0 ? _user$last_name : \"\",\n    telefono: (_user$phone = user === null || user === void 0 ? void 0 : user.phone) !== null && _user$phone !== void 0 ? _user$phone : \"\",\n    email: (_user$email = user === null || user === void 0 ? void 0 : user.email) !== null && _user$email !== void 0 ? _user$email : \"\",\n    direccion: \"\",\n    codigoPostal: \"\"\n  });\n  const [alert, setAlert] = useState();\n  const [alertMsg, setAlertMsg] = useState();\n  const [alertVariant, setAlertVariant] = useState();\n\n  const handleChange = e => {\n    setUserForm({ ...userForm,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleAlert = (msg, variant) => {\n    setAlert(true);\n    setAlertMsg(msg);\n    setAlertVariant(variant);\n    setTimeout(() => {\n      setAlert(false);\n      setAlertMsg(\"\");\n      setAlertVariant(\"\");\n    }, 2000);\n  };\n\n  const arrayMove = (arr, fromIndex, toIndex) => {\n    const element = arr[fromIndex];\n    arr.splice(fromIndex, 1);\n    arr.splice(toIndex, 0, element);\n  };\n\n  const addProduct = (product, oldIndex) => {\n    setHasLoaded(false);\n    const filteredProduct = cartRef.current.filter(item => item.product_id === product.product_id);\n    filteredProduct[0].totalNum += 1;\n    const filteredProducts = getArrayItems(product);\n    setObjectValues(filteredProducts, filteredProduct, oldIndex);\n    setCart(cart + 1);\n    setCartTotal(cartTotal + product.price);\n    setHasLoaded(true);\n  };\n\n  const setObjectValues = (filteredProducts, filteredProduct, oldIndex) => {\n    Array.prototype.push.apply(filteredProducts, filteredProduct);\n    const newIndex = filteredProducts.length - 1;\n    arrayMove(filteredProducts, newIndex, oldIndex);\n    cartRef.current = filteredProducts;\n    setAddedProduct(filteredProducts);\n  };\n\n  const getArrayItems = product => {\n    const filteredProducts = cartRef.current.filter(item => item.product_id !== product.product_id);\n    return filteredProducts;\n  };\n\n  const deleteProduct = (product, oldIndex) => {\n    setHasLoaded(false);\n    const filteredProduct = cartRef.current.filter(item => item.product_id === product.product_id);\n\n    if (filteredProduct[0].totalNum > 0) {\n      filteredProduct[0].totalNum -= 1;\n      const filteredProducts = getArrayItems(product);\n      setObjectValues(filteredProducts, filteredProduct, oldIndex);\n      setCart(cart - 1);\n      setCartTotal(cartTotal - product.price);\n      setHasLoaded(true);\n    }\n\n    if (filteredProduct[0].totalNum <= 0) {\n      cartRef.current.splice(oldIndex, 1);\n      setHasLoaded(true);\n    }\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    Object.entries(userForm).forEach(([key, value]) => {\n      if (value === \"\" || value.trim() === \"\") {\n        handleAlert(\"No puedes dejar espacios en blanco\", \"danger\");\n        return;\n      }\n\n      if (key === \"telefono\") {\n        if (isNaN(userForm[\"telefono\"]) || userForm[\"telefono\"].length !== 10) {\n          handleAlert(\"El teléfono está incorrecto, debe ser un número de 10 caracteres\", \"danger\");\n          return;\n        }\n      }\n    });\n  };\n\n  useEffect(() => {\n    addedProduct.forEach(value => {\n      const productId = value.product_id;\n      let totalNum = 0;\n      addedProduct.forEach(actualProduct => {\n        if (actualProduct.product_id === productId) {\n          if (actualProduct.hasOwnProperty(\"totalNum\")) {\n            // if (checker[0] && checker[1] === actualProduct.product_id) {\n            //   totalNum = actualProduct.totalNum + 1;\n            // } else {\n            totalNum = actualProduct.totalNum; // }\n          } else {\n            totalNum += 1;\n          }\n        }\n      });\n      value.totalNum = totalNum;\n    }); // setNeedsChange(false);\n\n    const unique = [...new Map(addedProduct.map(item => [item[\"product_id\"], item])).values()];\n    cartRef.current = unique;\n    setHasLoaded(true);\n  }, [addedProduct, cartRef]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mb-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"py-5 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"d-block mx-auto mb-5\",\n        src: \"https://image.flaticon.com/icons/png/512/3594/3594363.png\",\n        alt: \"\",\n        width: \"72\",\n        height: \"72\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Carrito de Compras\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"lead\",\n        children: \"Para proceder con su compra verifique sus datos y complete los campos vacios. Recibir\\xE1 un correo cuando su pedido haya sido aprobado.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [alert ? /*#__PURE__*/_jsxDEV(Alert, {\n        variant: alertVariant,\n        className: \"w-100 mx-auto\",\n        children: alertMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 order-md-2 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"d-flex justify-content-between align-items-center mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-muted\",\n            children: \"Carrito\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge badge-secondary badge-pill\",\n            children: cart\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-group mb-3\",\n          children: [hasLoaded ? cartRef.current.map(product => {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"list-group-item d-flex justify-content-between align-items-center flex-wrap lh-condensed\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.productCont,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.productInfo,\n                  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                    className: \"my-0\",\n                    children: product.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-muted\",\n                    children: product.descripcion\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.imgCont,\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: `${IMG_URL}${product.img}`,\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 221,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex flex-column\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-muted\",\n                  children: [\"$\", product.totalNum * product.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Cantidad: \", product.totalNum]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.buttons,\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-success\",\n                    onClick: () => addProduct(product, cartRef.current.indexOf(product)),\n                    children: \"+\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-danger\",\n                    onClick: () => deleteProduct(product, cartRef.current.indexOf(product)),\n                    children: \"-\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 23\n              }, this)]\n            }, product.product_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 21\n            }, this);\n          }) : null, /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"list-group-item d-flex justify-content-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: `$${cartTotal}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"card p-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              class: \"form-control\",\n              placeholder: \"Promo code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group-append\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-secondary\",\n                children: \"Redeem\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8 order-md-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"mb-3\",\n          children: \"Datos del Usuario\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"needs-validation\",\n          no: true,\n          Validate: true,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"nombre\",\n                children: \"Nombre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"nombre\",\n                name: \"nombre\",\n                placeholder: \"\",\n                value: userForm.nombre,\n                onChange: handleChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"invalid-feedback\",\n                children: \"Valid first name is required.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"apellido\",\n                children: \"Apellidos\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"apellido\",\n                name: \"apellido\",\n                placeholder: \"\",\n                value: userForm.apellido,\n                onChange: handleChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"invalid-feedback\",\n                children: \"Valid last name is required.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"telefono\",\n              children: \"Tel\\xE9fono\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group-prepend\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                id: \"telefono\",\n                name: \"telefono\",\n                placeholder: \"\",\n                value: userForm.telefono,\n                onChange: handleChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"invalid-feedback\",\n                style: {\n                  width: \"100%\"\n                },\n                children: \"Your username is required.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"email\",\n              children: [\"Email \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-muted\",\n                children: \"(Optional)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              className: \"form-control\",\n              id: \"email\",\n              name: \"email\",\n              placeholder: \"you@example.com\",\n              value: userForm.email,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"invalid-feedback\",\n              children: \"Please enter a valid email address for shipping updates.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"direccion\",\n              children: \"Direcci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              id: \"direccion\",\n              name: \"direccion\",\n              placeholder: \"1234 Main St\",\n              required: true,\n              value: userForm.direccion,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"invalid-feedback\",\n              children: \"Please enter your shipping address.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"codigoPostal\",\n              children: \"C\\xF3digo Postal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              class: \"form-control\",\n              id: \"codigoPostal\",\n              name: \"codigoPostal\",\n              placeholder: \"C\\xF3digo Postal\",\n              value: userForm.codigoPostal,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            class: \"mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"btn btn-primary btn-lg btn-block\",\n            onClick: handleSubmit,\n            children: \"Realizar Pedido\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CartPage, \"L8O2SZFZRYdG34P4QkEhBnC5LUA=\", false, function () {\n  return [useAuth];\n});\n\n_c = CartPage;\nexport default CartPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartPage\");","map":{"version":3,"sources":["C:/Users/ederivc/Documents/PuppyVeterinarySystem/frontend/src/pages/CartPage/CartPage.jsx"],"names":["React","useContext","useEffect","useState","IMG_URL","useAuth","CartContext","Alert","styles","CartPage","cart","setCart","addedProduct","setAddedProduct","cartTotal","cartRef","setCartTotal","user","hasLoaded","setHasLoaded","userForm","setUserForm","nombre","first_name","apellido","last_name","telefono","phone","email","direccion","codigoPostal","alert","setAlert","alertMsg","setAlertMsg","alertVariant","setAlertVariant","handleChange","e","target","name","value","handleAlert","msg","variant","setTimeout","arrayMove","arr","fromIndex","toIndex","element","splice","addProduct","product","oldIndex","filteredProduct","current","filter","item","product_id","totalNum","filteredProducts","getArrayItems","setObjectValues","price","Array","prototype","push","apply","newIndex","length","deleteProduct","handleSubmit","preventDefault","Object","entries","forEach","key","trim","isNaN","productId","actualProduct","hasOwnProperty","unique","Map","map","values","productCont","productInfo","descripcion","imgCont","img","buttons","indexOf","width"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { IMG_URL } from \"../../api/api\";\r\nimport useAuth from \"../../auth/useAuth\";\r\nimport { CartContext } from \"../../layouts/Layout\";\r\nimport { Alert } from \"react-bootstrap\";\r\nimport styles from \"./CartPage.module.css\";\r\n\r\nconst CartPage = () => {\r\n  const {\r\n    cart,\r\n    setCart,\r\n    addedProduct,\r\n    setAddedProduct,\r\n    cartTotal,\r\n    cartRef,\r\n    setCartTotal,\r\n    // needsChange,\r\n    // setNeedsChange,\r\n    // checker,\r\n  } = useContext(CartContext);\r\n\r\n  const { user } = useAuth();\r\n  const [hasLoaded, setHasLoaded] = useState(false);\r\n  const [userForm, setUserForm] = useState({\r\n    nombre: user?.first_name ?? \"\",\r\n    apellido: user?.last_name ?? \"\",\r\n    telefono: user?.phone ?? \"\",\r\n    email: user?.email ?? \"\",\r\n    direccion: \"\",\r\n    codigoPostal: \"\",\r\n  });\r\n\r\n  const [alert, setAlert] = useState();\r\n  const [alertMsg, setAlertMsg] = useState();\r\n  const [alertVariant, setAlertVariant] = useState();\r\n\r\n  const handleChange = (e) => {\r\n    setUserForm({\r\n      ...userForm,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleAlert = (msg, variant) => {\r\n    setAlert(true);\r\n    setAlertMsg(msg);\r\n    setAlertVariant(variant);\r\n    setTimeout(() => {\r\n      setAlert(false);\r\n      setAlertMsg(\"\");\r\n      setAlertVariant(\"\");\r\n    }, 2000);\r\n  };\r\n\r\n  const arrayMove = (arr, fromIndex, toIndex) => {\r\n    const element = arr[fromIndex];\r\n    arr.splice(fromIndex, 1);\r\n    arr.splice(toIndex, 0, element);\r\n  };\r\n\r\n  const addProduct = (product, oldIndex) => {\r\n    setHasLoaded(false);\r\n    const filteredProduct = cartRef.current.filter(\r\n      (item) => item.product_id === product.product_id\r\n    );\r\n\r\n    filteredProduct[0].totalNum += 1;\r\n\r\n    const filteredProducts = getArrayItems(product);\r\n\r\n    setObjectValues(filteredProducts, filteredProduct, oldIndex);\r\n\r\n    setCart(cart + 1);\r\n    setCartTotal(cartTotal + product.price);\r\n\r\n    setHasLoaded(true);\r\n  };\r\n\r\n  const setObjectValues = (filteredProducts, filteredProduct, oldIndex) => {\r\n    Array.prototype.push.apply(filteredProducts, filteredProduct);\r\n\r\n    const newIndex = filteredProducts.length - 1;\r\n\r\n    arrayMove(filteredProducts, newIndex, oldIndex);\r\n\r\n    cartRef.current = filteredProducts;\r\n    setAddedProduct(filteredProducts);\r\n  };\r\n\r\n  const getArrayItems = (product) => {\r\n    const filteredProducts = cartRef.current.filter(\r\n      (item) => item.product_id !== product.product_id\r\n    );\r\n\r\n    return filteredProducts;\r\n  };\r\n\r\n  const deleteProduct = (product, oldIndex) => {\r\n    setHasLoaded(false);\r\n    const filteredProduct = cartRef.current.filter(\r\n      (item) => item.product_id === product.product_id\r\n    );\r\n\r\n    if (filteredProduct[0].totalNum > 0) {\r\n      filteredProduct[0].totalNum -= 1;\r\n\r\n      const filteredProducts = getArrayItems(product);\r\n\r\n      setObjectValues(filteredProducts, filteredProduct, oldIndex);\r\n\r\n      setCart(cart - 1);\r\n      setCartTotal(cartTotal - product.price);\r\n\r\n      setHasLoaded(true);\r\n    }\r\n\r\n    if (filteredProduct[0].totalNum <= 0) {\r\n      cartRef.current.splice(oldIndex, 1);\r\n      setHasLoaded(true);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    Object.entries(userForm).forEach(([key, value]) => {\r\n      if (value === \"\" || value.trim() === \"\") {\r\n        handleAlert(\"No puedes dejar espacios en blanco\", \"danger\");\r\n        return;\r\n      }\r\n\r\n      if (key === \"telefono\") {\r\n        if (isNaN(userForm[\"telefono\"]) || userForm[\"telefono\"].length !== 10) {\r\n          handleAlert(\r\n            \"El teléfono está incorrecto, debe ser un número de 10 caracteres\",\r\n            \"danger\"\r\n          );\r\n          return;\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    addedProduct.forEach((value) => {\r\n      const productId = value.product_id;\r\n      let totalNum = 0;\r\n\r\n      addedProduct.forEach((actualProduct) => {\r\n        if (actualProduct.product_id === productId) {\r\n          if (actualProduct.hasOwnProperty(\"totalNum\")) {\r\n            // if (checker[0] && checker[1] === actualProduct.product_id) {\r\n            //   totalNum = actualProduct.totalNum + 1;\r\n            // } else {\r\n            totalNum = actualProduct.totalNum;\r\n            // }\r\n          } else {\r\n            totalNum += 1;\r\n          }\r\n        }\r\n      });\r\n      value.totalNum = totalNum;\r\n    });\r\n\r\n    // setNeedsChange(false);\r\n\r\n    const unique = [\r\n      ...new Map(\r\n        addedProduct.map((item) => [item[\"product_id\"], item])\r\n      ).values(),\r\n    ];\r\n\r\n    cartRef.current = unique;\r\n\r\n    setHasLoaded(true);\r\n  }, [addedProduct, cartRef]);\r\n\r\n  return (\r\n    <div className=\"container mb-4\">\r\n      <div className=\"py-5 text-center\">\r\n        <img\r\n          className=\"d-block mx-auto mb-5\"\r\n          src=\"https://image.flaticon.com/icons/png/512/3594/3594363.png\"\r\n          alt=\"\"\r\n          width=\"72\"\r\n          height=\"72\"\r\n        />\r\n        <h2>Carrito de Compras</h2>\r\n        <p className=\"lead\">\r\n          Para proceder con su compra verifique sus datos y complete los campos\r\n          vacios. Recibirá un correo cuando su pedido haya sido aprobado.\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        {alert ? (\r\n          <Alert variant={alertVariant} className=\"w-100 mx-auto\">\r\n            {alertMsg}\r\n          </Alert>\r\n        ) : null}\r\n        <div className=\"col-md-4 order-md-2 mb-4\">\r\n          <h4 className=\"d-flex justify-content-between align-items-center mb-3\">\r\n            <span className=\"text-muted\">Carrito</span>\r\n            <span className=\"badge badge-secondary badge-pill\">{cart}</span>\r\n          </h4>\r\n          <ul className=\"list-group mb-3\">\r\n            {hasLoaded\r\n              ? cartRef.current.map((product) => {\r\n                  return (\r\n                    <li\r\n                      key={product.product_id}\r\n                      className=\"list-group-item d-flex justify-content-between align-items-center flex-wrap lh-condensed\"\r\n                    >\r\n                      <div className={styles.productCont}>\r\n                        <div className={styles.productInfo}>\r\n                          <h6 className=\"my-0\">{product.name}</h6>\r\n                          <small className=\"text-muted\">\r\n                            {product.descripcion}\r\n                          </small>\r\n                        </div>\r\n                        <div className={styles.imgCont}>\r\n                          <img src={`${IMG_URL}${product.img}`} alt=\"\" />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"d-flex flex-column\">\r\n                        <span className=\"text-muted\">\r\n                          ${product.totalNum * product.price}\r\n                        </span>\r\n                        <span>Cantidad: {product.totalNum}</span>\r\n                        <div className={styles.buttons}>\r\n                          <button\r\n                            className=\"btn btn-success\"\r\n                            onClick={() =>\r\n                              addProduct(\r\n                                product,\r\n                                cartRef.current.indexOf(product)\r\n                              )\r\n                            }\r\n                          >\r\n                            +\r\n                          </button>\r\n                          <button\r\n                            className=\"btn btn-danger\"\r\n                            onClick={() =>\r\n                              deleteProduct(\r\n                                product,\r\n                                cartRef.current.indexOf(product)\r\n                              )\r\n                            }\r\n                          >\r\n                            -\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </li>\r\n                  );\r\n                })\r\n              : null}\r\n            {/* <li class=\"list-group-item d-flex justify-content-between lh-condensed\">\r\n              <div>\r\n                <h6 class=\"my-0\">Product name</h6>\r\n                <small class=\"text-muted\">Brief description</small>\r\n              </div>\r\n              <span class=\"text-muted\">$12</span>\r\n            </li>\r\n            <li class=\"list-group-item d-flex justify-content-between lh-condensed\">\r\n              <div>\r\n                <h6 class=\"my-0\">Second product</h6>\r\n                <small class=\"text-muted\">Brief description</small>\r\n              </div>\r\n              <span class=\"text-muted\">$8</span>\r\n            </li>\r\n            <li class=\"list-group-item d-flex justify-content-between lh-condensed\">\r\n              <div>\r\n                <h6 class=\"my-0\">Third item</h6>\r\n                <small class=\"text-muted\">Brief description</small>\r\n              </div>\r\n              <span class=\"text-muted\">$5</span>\r\n            </li>\r\n            <li class=\"list-group-item d-flex justify-content-between bg-light\">\r\n              <div class=\"text-success\">\r\n                <h6 class=\"my-0\">Promo code</h6>\r\n                <small>EXAMPLECODE</small>\r\n              </div>\r\n              <span class=\"text-success\">-$5</span>\r\n            </li> */}\r\n            <li className=\"list-group-item d-flex justify-content-between\">\r\n              <span>Total</span>\r\n              <strong>{`$${cartTotal}`}</strong>\r\n            </li>\r\n          </ul>\r\n\r\n          <form className=\"card p-2\">\r\n            <div className=\"input-group\">\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                placeholder=\"Promo code\"\r\n              />\r\n              <div className=\"input-group-append\">\r\n                <button type=\"submit\" className=\"btn btn-secondary\">\r\n                  Redeem\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        <div className=\"col-md-8 order-md-1\">\r\n          <h4 className=\"mb-3\">Datos del Usuario</h4>\r\n          <form className=\"needs-validation\" no Validate>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6 mb-3\">\r\n                <label for=\"nombre\">Nombre</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"nombre\"\r\n                  name=\"nombre\"\r\n                  placeholder=\"\"\r\n                  value={userForm.nombre}\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n                <div className=\"invalid-feedback\">\r\n                  Valid first name is required.\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-6 mb-3\">\r\n                <label for=\"apellido\">Apellidos</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"apellido\"\r\n                  name=\"apellido\"\r\n                  placeholder=\"\"\r\n                  value={userForm.apellido}\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n                <div className=\"invalid-feedback\">\r\n                  Valid last name is required.\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label for=\"telefono\">Teléfono</label>\r\n              <div className=\"input-group\">\r\n                <div className=\"input-group-prepend\"></div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"telefono\"\r\n                  name=\"telefono\"\r\n                  placeholder=\"\"\r\n                  value={userForm.telefono}\r\n                  onChange={handleChange}\r\n                  required\r\n                />\r\n                <div className=\"invalid-feedback\" style={{ width: \"100%\" }}>\r\n                  Your username is required.\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label for=\"email\">\r\n                Email <span className=\"text-muted\">(Optional)</span>\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                id=\"email\"\r\n                name=\"email\"\r\n                placeholder=\"you@example.com\"\r\n                value={userForm.email}\r\n                onChange={handleChange}\r\n              />\r\n              <div className=\"invalid-feedback\">\r\n                Please enter a valid email address for shipping updates.\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-3\">\r\n              <label for=\"direccion\">Dirección</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"direccion\"\r\n                name=\"direccion\"\r\n                placeholder=\"1234 Main St\"\r\n                required\r\n                value={userForm.direccion}\r\n                onChange={handleChange}\r\n              />\r\n              <div className=\"invalid-feedback\">\r\n                Please enter your shipping address.\r\n              </div>\r\n            </div>\r\n\r\n            {/* <div class=\"mb-3\">\r\n              <label for=\"address2\">\r\n                Address 2 <span class=\"text-muted\">(Optional)</span>\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"address2\"\r\n                placeholder=\"Apartment or suite\"\r\n                value={userForm.direccion}\r\n              />\r\n            </div> */}\r\n            <div class=\"mb-3\">\r\n              <label for=\"codigoPostal\">Código Postal</label>\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                id=\"codigoPostal\"\r\n                name=\"codigoPostal\"\r\n                placeholder=\"Código Postal\"\r\n                value={userForm.codigoPostal}\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n\r\n            {/* <div class=\"row\">\r\n              <div class=\"col-md-5 mb-3\">\r\n                <label for=\"country\">Country</label>\r\n                <select\r\n                  class=\"custom-select d-block w-100\"\r\n                  id=\"country\"\r\n                  required\r\n                >\r\n                  <option value=\"\">Choose...</option>\r\n                  <option>United States</option>\r\n                </select>\r\n                <div class=\"invalid-feedback\">\r\n                  Please select a valid country.\r\n                </div>\r\n              </div>\r\n              <div class=\"col-md-4 mb-3\">\r\n                <label for=\"state\">State</label>\r\n                <select class=\"custom-select d-block w-100\" id=\"state\" required>\r\n                  <option value=\"\">Choose...</option>\r\n                  <option>California</option>\r\n                </select>\r\n                <div class=\"invalid-feedback\">\r\n                  Please provide a valid state.\r\n                </div>\r\n              </div>\r\n              <div class=\"col-md-3 mb-3\">\r\n                <label for=\"zip\">Zip</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"zip\"\r\n                  placeholder=\"\"\r\n                  required\r\n                />\r\n                <div class=\"invalid-feedback\">Zip code required.</div>\r\n              </div>\r\n            </div> */}\r\n            {/* </div> */}\r\n            {/* <hr class=\"mb-4\" />\r\n            <div class=\"custom-control custom-checkbox\">\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"custom-control-input\"\r\n                id=\"same-address\"\r\n              />\r\n              <label class=\"custom-control-label\" for=\"same-address\">\r\n                Shipping address is the same as my billing address\r\n              </label>\r\n            </div>\r\n            <div class=\"custom-control custom-checkbox\">\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"custom-control-input\"\r\n                id=\"save-info\"\r\n              />\r\n              <label class=\"custom-control-label\" for=\"save-info\">\r\n                Save this information for next time\r\n              </label>\r\n            </div>\r\n            <hr class=\"mb-4\" />\r\n\r\n            <h4 class=\"mb-3\">Payment</h4> */}\r\n\r\n            {/* <div class=\"d-block my-3\">\r\n              <div class=\"custom-control custom-radio\">\r\n                <input\r\n                  id=\"credit\"\r\n                  name=\"paymentMethod\"\r\n                  type=\"radio\"\r\n                  class=\"custom-control-input\"\r\n                  checked\r\n                  required\r\n                />\r\n                <label class=\"custom-control-label\" for=\"credit\">\r\n                  Credit card\r\n                </label>\r\n              </div>\r\n              <div class=\"custom-control custom-radio\">\r\n                <input\r\n                  id=\"debit\"\r\n                  name=\"paymentMethod\"\r\n                  type=\"radio\"\r\n                  class=\"custom-control-input\"\r\n                  required\r\n                />\r\n                <label class=\"custom-control-label\" for=\"debit\">\r\n                  Debit card\r\n                </label>\r\n              </div>\r\n              <div class=\"custom-control custom-radio\">\r\n                <input\r\n                  id=\"paypal\"\r\n                  name=\"paymentMethod\"\r\n                  type=\"radio\"\r\n                  class=\"custom-control-input\"\r\n                  required\r\n                />\r\n                <label class=\"custom-control-label\" for=\"paypal\">\r\n                  PayPal\r\n                </label>\r\n              </div>\r\n            </div> */}\r\n            {/* <div class=\"row\">\r\n              <div class=\"col-md-6 mb-3\">\r\n                <label for=\"cc-name\">Name on card</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"cc-name\"\r\n                  placeholder=\"\"\r\n                  required\r\n                />\r\n                <small class=\"text-muted\">Full name as displayed on card</small>\r\n                <div class=\"invalid-feedback\">Name on card is required</div>\r\n              </div>\r\n              <div class=\"col-md-6 mb-3\">\r\n                <label for=\"cc-number\">Credit card number</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"cc-number\"\r\n                  placeholder=\"\"\r\n                  required\r\n                />\r\n                <div class=\"invalid-feedback\">\r\n                  Credit card number is required\r\n                </div>\r\n              </div>\r\n            </div> */}\r\n            {/* <div class=\"row\">\r\n              <div class=\"col-md-3 mb-3\">\r\n                <label for=\"cc-expiration\">Expiration</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"cc-expiration\"\r\n                  placeholder=\"\"\r\n                  required\r\n                />\r\n                <div class=\"invalid-feedback\">Expiration date required</div>\r\n              </div>\r\n              <div class=\"col-md-3 mb-3\">\r\n                <label for=\"cc-cvv\">CVV</label>\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  id=\"cc-cvv\"\r\n                  placeholder=\"\"\r\n                  required\r\n                />\r\n                <div class=\"invalid-feedback\">Security code required</div>\r\n              </div>\r\n            </div> */}\r\n            <hr class=\"mb-4\" />\r\n            <button\r\n              class=\"btn btn-primary btn-lg btn-block\"\r\n              onClick={handleSubmit}\r\n            >\r\n              Realizar Pedido\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartPage;\r\n"]},"metadata":{},"sourceType":"module"}